{% extends "wearers/base.html" %}
{% load thumbnail %}

{% block page-style %}
<style>
  ol.year,
  ol.year li {
    margin: 0;
    padding: 0;
  }
  ol.year h2 {
    margin-top: 0;
  }
  ol.year ol.month {
    margin-bottom: 2em;
  }
  #body h1,
  ol.year h2 {
    text-align: center;
  }
</style>
{% endblock %}

{% block content %}
<h1>{{year}}</h1>

<ol class='year'>
{% for wearing in wearings %}
  {% ifchanged wearing.day.month %}
    {% if not forloop.first %}
    </ol>
    {% endif %}
    <h2>{{wearing.day|date:"F"}}</h2>
    <ol class='month clothing'>
  {% endifchanged %}
    <li value='{{wearing.day|date:"d"}}'
        class='{{wearing.day|date:"D"}} {% if wearing.day.weekday == 5 %}new-week{% endif %}'>
      <a href='{{wearing.clothing.static_site_url}}'>
        {% thumbnail wearing.clothing.image "100x100" crop="center" as thumb %}
          <img src='{{thumb.url}}' width=100 height=100 alt=''>
        {% empty %}
          <img src='//hasworn.m17s.net/placeholder/tshirt.100.jpg' width=100 height=100 alt=''>
        {% endthumbnail %}
      </a>
      <i><b>{{wearing.day|date:"F"}}</b> {{wearing.day|date:"jS"}}</i>
    </li>
{% endfor %}
  </ol>
</ol>

{% endblock %}
